{% extends "base.html" %}
{% block title %}Mot de passe oublié - MyKarfour{% endblock %}

{% block content %}
<section class="min-h-screen flex flex-col md:flex-row items-center justify-center">
  
  <!-- Colonne gauche : message d'accueil -->
  <div class="w-full md:w-1/2 bg-yellow-400 p-10 flex flex-col justify-center text-black min-h-[400px]">
    <div class="max-w-md mx-auto">
      <h1 class="text-4xl font-extrabold mb-4">Mot de passe oublié ?</h1>
      <p class="text-lg mb-4">
        Pas de panique ! Saisissez simplement votre adresse e-mail et nous vous enverrons un lien de réinitialisation.
      </p>
      <p class="text-sm italic text-gray-800">Assurez-vous d'utiliser l'adresse que vous avez enregistrée.</p>
    </div>
  </div>

  <!-- Colonne droite : formulaire -->
  <div class="w-full md:w-1/2 bg-[#0EA7A7] p-10 text-white min-h-[400px] flex items-center justify-center">
    <div class="w-full max-w-md">
      <h2 class="text-3xl font-bold mb-6 text-center">Réinitialiser le mot de passe</h2>

      <!-- Messages -->
      {% if messages %}
        <div class="mb-4 space-y-2">
          {% for message in messages %}
            <p class="text-center p-2 rounded 
              {% if message.tags == 'success' %}bg-green-200 text-green-900
              {% elif message.tags == 'error' %}bg-red-200 text-red-900
              {% endif %}">
              {{ message }}
            </p>
          {% endfor %}
        </div>
      {% endif %}

      <!-- Formulaire stylisé -->
      <form method="post" class="space-y-4">
        {% csrf_token %}

        <div class="text-left">
          <label for="{{ form.email.id_for_label }}" class="block mb-1 font-medium text-white">
            {{ form.email.label }}
          </label>
          {{ form.email }}
          {% if form.email.errors %}
            <p class="text-red-500 text-sm mt-1">{{ form.email.errors }}</p>
          {% endif %}
        </div>

        <button type="submit" 
                class="w-full bg-green-500 hover:bg-green-600 text-white font-semibold py-2 px-4 rounded transition">
          Envoyer le lien
        </button>
      </form>

      <p class="text-center text-sm text-white mt-6">
        <a href="{% url 'connexion' %}" class="underline font-semibold hover:text-white/80">
          Retour à la connexion
        </a>
      </p>
    </div>
  </div>
</section>

<!-- JS pour appliquer Tailwind aux inputs -->
<script>
document.addEventListener("DOMContentLoaded", () => {
  document.querySelectorAll("input").forEach(input => {
    input.classList.add(
      "w-full",
      "px-3",
      "py-2",
      "rounded-lg",
      "bg-white",          // fond blanc
      "text-black",        // texte noir
      "border",
      "border-gray-300",
      "focus:outline-none",
      "focus:ring-2",
      "focus:ring-green-500"
    );
  });
});
</script>

{% endblock %}
