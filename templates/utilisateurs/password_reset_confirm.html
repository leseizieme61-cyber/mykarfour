{% extends "base.html" %}
{% block title %}Nouveau mot de passe - MyKarfour{% endblock %}

{% block content %}
<section class="min-h-screen flex flex-col md:flex-row items-center justify-center">

  <!-- Colonne gauche : message d'accueil -->
  <div class="w-full md:w-1/2 bg-yellow-400 p-10 flex flex-col justify-center text-black min-h-[400px]">
    <div class="max-w-md mx-auto">
      <h1 class="text-4xl font-extrabold mb-4">D√©finir un nouveau mot de passe üîê</h1>
      <p class="text-lg mb-4">
        Choisissez un mot de passe s√©curis√© pour prot√©ger votre compte.
      </p>
      <p class="text-sm italic text-gray-800">
        Le mot de passe doit respecter les crit√®res de s√©curit√© en vigueur.
      </p>
    </div>
  </div>

  <!-- Colonne droite : formulaire -->
  <div class="w-full md:w-1/2 bg-[#0EA7A7] p-10 text-white min-h-[400px] flex items-center justify-center">
    <div class="w-full max-w-md">
      {% if validlink %}
        <h2 class="text-3xl font-bold mb-6 text-center">Nouveau mot de passe</h2>

        <form method="post" class="space-y-4">
          {% csrf_token %}

          <!-- Rendu individuel du formulaire pour styliser les inputs -->
          <div class="text-left">
            <label for="{{ form.new_password1.id_for_label }}" class="block mb-1 font-medium text-white">
              {{ form.new_password1.label }}
            </label>
            {{ form.new_password1 }}
            {% if form.new_password1.errors %}
              <p class="text-red-200 text-sm mt-1">{{ form.new_password1.errors }}</p>
            {% endif %}
          </div>

          <div class="text-left">
            <label for="{{ form.new_password2.id_for_label }}" class="block mb-1 font-medium text-white">
              {{ form.new_password2.label }}
            </label>
            {{ form.new_password2 }}
            {% if form.new_password2.errors %}
              <p class="text-red-200 text-sm mt-1">{{ form.new_password2.errors }}</p>
            {% endif %}
          </div>

          <button type="submit" 
                  class="w-full bg-green-500 hover:bg-green-600 text-white font-semibold py-2 px-4 rounded transition">
            Changer le mot de passe
          </button>
        </form>

      {% else %}
        <p class="text-center bg-red-200 text-red-900 p-4 rounded">
          Ce lien est invalide ou a expir√©.
        </p>
      {% endif %}
    </div>
  </div>
</section>

<!-- JS pour appliquer Tailwind aux inputs -->
<script>
document.addEventListener("DOMContentLoaded", () => {
  document.querySelectorAll("input").forEach(input => {
    input.classList.add(
      "w-full",
      "px-3",
      "py-2",
      "rounded-lg",
      "bg-white",          // fond blanc
      "text-black",        // texte noir
      "border",
      "border-gray-300",
      "focus:outline-none",
      "focus:ring-2",
      "focus:ring-green-500"
    );
  });
});
</script>

{% endblock %}
